<?xml version="1.0" encoding="UTF-8"?>
<Shell xmlns="http://xamarin.com/schemas/2014/forms" 
       xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
       xmlns:local="clr-namespace:WalimuV2.Views"
       xmlns:hospitals="clr-namespace:WalimuV2.Views.hospitals"
       xmlns:TrackHospitalVisit="clr-namespace:WalimuV2.Views.TrackHospitalVisit"
       xmlns:Dependants="clr-namespace:WalimuV2.Views.Dependants"
       xmlns:Policy="clr-namespace:WalimuV2.Views.Policy"
       xmlns:Downloads="clr-namespace:WalimuV2.Views.Downloads"
       xmlns:Telemedicine="clr-namespace:WalimuV2.Views.Telemedicine"
       xmlns:Others="clr-namespace:WalimuV2.Views.Others"
       xmlns:Ecard="clr-namespace:WalimuV2.Views.Ecard"
       xmlns:Profile="clr-namespace:WalimuV2.Views.Profile" 
       xmlns:xct="http://xamarin.com/schemas/2020/toolkit"
       xmlns:magicGradients="http://magic.com/schemas/gradients"
       Title="WalimuV2"
       x:Class="WalimuV2.AppShell" 
       Visual="Material" >      

    <Shell.Resources>
        <ResourceDictionary>
            <Style x:Key="BaseStyle" TargetType="Element">
                <Setter Property="Shell.BackgroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.ForegroundColor" Value="White" />
                <Setter Property="Shell.TitleColor" Value="White" />
                <Setter Property="Shell.DisabledColor" Value="#B4FFFFFF" />
                <Setter Property="Shell.UnselectedColor" Value="#95FFFFFF" />
                <Setter Property="Shell.TabBarBackgroundColor" Value="{StaticResource Primary}" />
                <Setter Property="Shell.TabBarForegroundColor" Value="White"/>
                <Setter Property="Shell.TabBarUnselectedColor" Value="#95FFFFFF"/>
                <Setter Property="Shell.TabBarTitleColor" Value="White"/>
            </Style>
            <Style TargetType="TabBar" BasedOn="{StaticResource BaseStyle}" />
            <Style TargetType="FlyoutItem" BasedOn="{StaticResource BaseStyle}" />
            <!--
            Default Styles for all Flyout Items
            https://docs.microsoft.com/xamarin/xamarin-forms/app-fundamentals/shell/flyout#flyoutitem-and-menuitem-style-classes
            -->
            <Style Class="FlyoutItemLabelStyle" TargetType="Label">
                <Setter Property="TextColor" Value="White"></Setter>
            </Style>
            <Style Class="FlyoutItemLayoutStyle" TargetType="Layout" ApplyToDerivedTypes="True">
                <Setter Property="VisualStateManager.VisualStateGroups">
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="{x:OnPlatform UWP=Transparent, iOS=White}" />
                                    <Setter TargetName="FlyoutItemLabel" Property="Label.TextColor" Value="{StaticResource Secondary}" />
                                </VisualState.Setters>
                            </VisualState>
                            <!--<VisualState x:Name="Selected">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="{StaticResource HkBackground}" />
                                </VisualState.Setters>
                            </VisualState>-->
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </Setter>
            </Style>

            <!--
            Custom Style you can apply to any Flyout Item
            -->
            <Style Class="MenuItemLayoutStyle" TargetType="Layout" ApplyToDerivedTypes="True">
                <Setter Property="VisualStateManager.VisualStateGroups">
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <VisualState.Setters>
                                    <Setter TargetName="FlyoutItemLabel" Property="Label.TextColor" Value="{StaticResource Primary}" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Shell.Resources>


    <Shell.FlyoutHeaderTemplate>
        <DataTemplate>
            <Grid
                Margin="0"
                Padding="0"
                HeightRequest="100">

                <Frame BorderColor="LightGray"
       HasShadow="True"
       CornerRadius="2"
       HeightRequest="120"
       WidthRequest="120">
                    <Frame.Background>
                        <!-- StartPoint defaults to (0,0) -->
                        <LinearGradientBrush EndPoint="0,1">
                            <GradientStop Color="{StaticResource PrimaryLight1}"
                          Offset="0.1" />
                            <GradientStop Color="{StaticResource Primary}"
                          Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>
                </Frame>




                <!--<magicGradients:GradientView VerticalOptions="FillAndExpand">
                    <magicGradients:GradientView.GradientSource>
                        <magicGradients:CssGradientSource>
                            <x:String>
                                <![CDATA[                                    
                               linear-gradient(74deg, rgba(246, 246, 246, 0.03) 0%, rgba(246, 246, 246, 0.03) 4%,rgba(152, 152, 152, 0.03) 4%, rgba(152, 152, 152, 0.03) 32%,rgba(123, 123, 123, 0.03) 32%, rgba(123, 123, 123, 0.03) 41%,rgba(189, 189, 189, 0.03) 41%, rgba(189, 189, 189, 0.03) 45%,rgba(151, 151, 151, 0.03) 45%, rgba(151, 151, 151, 0.03) 47%,rgba(61, 61, 61, 0.03) 47%, rgba(61, 61, 61, 0.03) 77%,rgba(34, 34, 34, 0.03) 77%, rgba(34, 34, 34, 0.03) 100%),linear-gradient(117deg, rgba(222, 222, 222, 0.03) 0%, rgba(222, 222, 222, 0.03) 7%,rgba(67, 67, 67, 0.03) 7%, rgba(67, 67, 67, 0.03) 18%,rgba(61, 61, 61, 0.03) 18%, rgba(61, 61, 61, 0.03) 26%,rgba(32, 32, 32, 0.03) 26%, rgba(32, 32, 32, 0.03) 52%,rgba(119, 119, 119, 0.03) 52%, rgba(119, 119, 119, 0.03) 60%,rgba(252, 252, 252, 0.03) 60%, rgba(252, 252, 252, 0.03) 68%,rgba(9, 9, 9, 0.03) 68%, rgba(9, 9, 9, 0.03) 100%),linear-gradient(313deg, rgba(193, 193, 193, 0.03) 0%, rgba(193, 193, 193, 0.03) 12%,rgba(184, 184, 184, 0.03) 12%, rgba(184, 184, 184, 0.03) 24%,rgba(194, 194, 194, 0.03) 24%, rgba(194, 194, 194, 0.03) 43%,rgba(128, 128, 128, 0.03) 43%, rgba(128, 128, 128, 0.03) 54%,rgba(87, 87, 87, 0.03) 54%, rgba(87, 87, 87, 0.03) 71%,rgba(169, 169, 169, 0.03) 71%, rgba(169, 169, 169, 0.03) 93%,rgba(83, 83, 83, 0.03) 93%, rgba(83, 83, 83, 0.03) 100%),linear-gradient(19deg, rgba(186, 186, 186, 0.03) 0%, rgba(186, 186, 186, 0.03) 9%,rgba(77, 77, 77, 0.03) 9%, rgba(77, 77, 77, 0.03) 19%,rgba(38, 38, 38, 0.03) 19%, rgba(38, 38, 38, 0.03) 27%,rgba(203, 203, 203, 0.03) 27%, rgba(203, 203, 203, 0.03) 39%,rgba(130, 130, 130, 0.03) 39%, rgba(130, 130, 130, 0.03) 43%,rgba(184, 184, 184, 0.03) 43%, rgba(184, 184, 184, 0.03) 81%,rgba(108, 108, 108, 0.03) 81%, rgba(108, 108, 108, 0.03) 100%),linear-gradient(90deg, rgb(107, 4, 15),rgb(240, 4, 35))                                        
                                ]]>
                            </x:String>
                        </magicGradients:CssGradientSource>
                    </magicGradients:GradientView.GradientSource>
                </magicGradients:GradientView>-->

                <StackLayout
                    Margin="20,0,0,0"
                    Padding="0"    
                    HorizontalOptions="Start"
                    Orientation="Horizontal">

                    <xct:AvatarView
                        Margin="0"
                        HorizontalOptions="StartAndExpand"
                        Source="{Binding ImageUrl}"
                        VerticalOptions="CenterAndExpand" />

                    <StackLayout                                         
                        Spacing="0"
                          Margin="25,0,0,0"
                        VerticalOptions="CenterAndExpand">
                        <Label
                           
                            HorizontalTextAlignment="Center"                            
                            Style="{StaticResource MedBookLabel}"
                            Text="{Binding FullName}"
                            TextColor="White"
                            VerticalTextAlignment="End" />

                        <Label
                            HorizontalTextAlignment="Center"
                            Style="{StaticResource MedBookLabelNormal}"
                            Text="View Profile"
                            TextColor="White"
                            VerticalTextAlignment="End">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ViewProfileCommand}" />
                            </Label.GestureRecognizers>
                        </Label>
                    </StackLayout>
                </StackLayout>
            </Grid>
        </DataTemplate>
    </Shell.FlyoutHeaderTemplate>



    <!--<Shell.FlyoutHeaderTemplate>
        <DataTemplate>
            <Grid HorizontalOptions="FillAndExpand" HeightRequest="100" 
              VerticalOptions="FillAndExpand" >
                <Grid.ColumnDefinitions >
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="30"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="80" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Image 
                    Aspect="AspectFill"
                    
                    Source="gradient.png"
                    
                    Grid.ColumnSpan="5"
                    
                    Grid.RowSpan="4"
                    
                    Opacity="1"
                   />
                <Image 
                    Source="user.png" 
                    
                    HeightRequest="70" 
                    
                    WidthRequest="60"
                    
                    Grid.Column="1"
                    
                    Grid.Row="1"
                    
                    HorizontalOptions="Start"
                    
                    VerticalOptions="End"/>
                
                <StackLayout                         
                         VerticalOptions="CenterAndExpand"
                    
                         Grid.Row="1" 
                    
                         Margin="10,0,0,0"
                    
                         Grid.Column="2"
                    
                         Grid.ColumnSpan="3"
                    
                         Orientation="Vertical">
                    
                    <Label 
                        HorizontalTextAlignment="Start"
                        
                        VerticalTextAlignment="Center"
                        
                        TextColor="white"
                        
                        Text="{Binding ProfileName}"/>
                    
                    <Label 
                        HorizontalTextAlignment="Start"
                        
                        VerticalTextAlignment="Center"
                        
                        TextColor="white"
                        
                        Text="View Profile"/>
                </StackLayout>
            </Grid>
        </DataTemplate>
    </Shell.FlyoutHeaderTemplate>-->    
    

    <FlyoutItem  Title="Dashboard" Icon="dashboardIcon.png" >
        <ShellContent  Route="AboutPage" ContentTemplate="{DataTemplate local:AboutPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Find Hospital" Icon="hospitalIcon.png">
        <ShellContent  Route="FindHospitalPage" ContentTemplate="{DataTemplate hospitals:FindHospitalPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Track Hospital Visit" Icon="hospitalbedicon.png" >
        <ShellContent  Route="HospitalVisitPage" ContentTemplate="{DataTemplate TrackHospitalVisit:HospitalVisitPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Manage Dependants" Icon="dependantsIcon.png" >
        <ShellContent  Route="DependantPage" ContentTemplate="{DataTemplate Dependants:DependantPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Know Your Policy" Icon="policydocumentsicon.png">
        <ShellContent  Route="PolicyDetailsPage" ContentTemplate="{DataTemplate Policy:PolicyDetailsPage}" />
    </FlyoutItem>

    <!--<FlyoutItem  Title="Available Limits" Icon="policylimitsicon.png">
        <ShellContent  Route="PolicyLimitsPage" ContentTemplate="{DataTemplate Policy:PolicyLimitsPage}" />
    </FlyoutItem>-->

    <FlyoutItem  Title="E-Card" Icon="ecard.png" >
        <ShellContent  Route="ECardPage" ContentTemplate="{DataTemplate Ecard:ECardPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="My Download Center" Icon="mydownloadcentre.png">
        <ShellContent  Route="MyDownloadCenterPage" ContentTemplate="{DataTemplate Downloads:MyDownloadCenterPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Telemedicine" Icon="telemedicine.png" >
        <ShellContent  Route="TeleMedicineCallOrWebLinkPage" ContentTemplate="{DataTemplate Telemedicine:TeleMedicineCallOrWebLinkPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Report Issues/Feedback" Icon="complaint.png" >
        <ShellContent  Route="SubmitComplaintsPage" ContentTemplate="{DataTemplate Others:SubmitComplaintsPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="Request Callback" Icon="callbackicon.png" >
        <ShellContent  Route="CallBacksPage" ContentTemplate="{DataTemplate Others:CallBacksPage}" />
    </FlyoutItem>

    <FlyoutItem  Title="FAQs" Icon="faqs.png" >
        <ShellContent  Route="FAQPage" ContentTemplate="{DataTemplate Others:FAQPage}"/>
    </FlyoutItem>

    <FlyoutItem  Title="Covid 19" Icon="covid.png" >
        <ShellContent  Route="Covid19Page" ContentTemplate="{DataTemplate Others:Covid19Page}" />
    </FlyoutItem>

    <FlyoutItem  Title="Emergency Contacts" Icon="contactUsIcon.png" >
        <ShellContent  Route="ContactUsPage" ContentTemplate="{DataTemplate Others:ContactUsPage}" />
    </FlyoutItem>
    


    <!--<FlyoutItem  Title="Profile" Icon="contactUsIcon.png" >
        <ShellContent  Route="ContactUsPage" ContentTemplate="{DataTemplate Profile:FileUploadPage}" />
    </FlyoutItem>-->


    <!--<FlyoutItem Title="Browse" Icon="icon_feed.png">
        <ShellContent Route="ItemsPage" ContentTemplate="{DataTemplate local:ItemsPage}" />
    </FlyoutItem>-->

    <MenuItem
        Clicked="OnMenuItemClicked"
        IconImageSource="LogoutIcon.png"
        StyleClass="MenuItemLayoutStyle"
        Text="Logout" />

    <TabBar>
        <ShellContent Route="LoginPage" ContentTemplate="{DataTemplate local:LoginPage}" />
    </TabBar>



</Shell>
